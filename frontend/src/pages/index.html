<!doctype html>
<html lang="pt-BR">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>ShellBlocks - Ambiente Interativo de Aprendizado CLI</title>
        <link rel="icon" href="/favicon.svg" type="image/svg+xml" />
        <link href="./index.css" rel="stylesheet" />
        <script type="module" src="./index.ts"></script>
    </head>
    <body>
        <header id="app-header" class="app-header">
            <div class="header-brand">
                <div class="logo-area">
                    <h1>ShellBlocks</h1>
                    <span class="brand-divider">|</span>
                    <span class="brand-tagline">Ambiente Interativo para Aprendizado de CLI</span>
                </div>
            </div>

            <div class="header-context">
                <button id="btn-help-guide" class="btn-tool btn-guide-urgent">
                    <img src="/icons/lucid/help-circle.svg" class="btn-icon" alt="" />
                    Explicar Ferramenta
                </button>

                <div class="context-controls">
                    <div class="context-summary">
                        <img src="/icons/lucid/info.svg" class="icon-inline" alt="" />
                        <p id="level-summary-text" class="summary-text"></p>
                    </div>

                    <label for="level-select" class="input-label">Miss√£o:</label>
                    <select id="level-select" class="level-select">
                        <option value="">Carregando...</option>
                    </select>
                </div>

                <button id="header-toggle-btn" class="btn-details-toggle" title="Ler guia completo">
                    <span class="btn-label">Guia Completo</span>
                    <img src="/icons/lucid/chevron-down.svg" class="btn-icon" alt="" />
                </button>
            </div>

            <div class="header-details-panel">
                <div class="details-content-wrapper">
                    <article id="level-full-details" class="level-full-details"></article>
                </div>
            </div>
        </header>

        <main class="main-layout" id="workspace-area">
            <div class="editor-column">
                <div class="editor-toolbar">
                    <div class="toolbar-group">
                        <button id="btn-save-script" class="btn-tool" title="Baixar script atual (.json)">
                            <img src="/icons/lucid/save.svg" class="btn-icon" alt="" />
                            Salvar Workspace
                        </button>
                        <button id="btn-load-script" class="btn-tool" title="Carregar script (.json)">
                            <img src="/icons/lucid/folder-open.svg" class="btn-icon" alt="" />
                            Carregar Workspace
                        </button>
                    </div>

                    <span class="divider"></span>

                    <div class="toolbar-group">
                        <button id="btn-load-defs" class="btn-tool" title="Carregar novas defini√ß√µes (cli_definitions.json)">
                            <img src="/icons/lucid/settings.svg" class="btn-icon" alt="" />
                            Carregar Defini√ß√µes
                        </button>
                        <button id="btn-load-game" class="btn-tool" title="Carregar novos n√≠veis (game_data.json)">
                            <img src="/icons/lucid/gamepad-2.svg" class="btn-icon" alt="" />
                            Carregar N√≠veis
                        </button>
                    </div>

                    <span class="spacer"></span>

                    <button id="btn-reset-defs" class="btn-tool btn-tool-danger" title="Voltar para as configura√ß√µes padr√£o de f√°brica">
                        <img src="/icons/lucid/rotate-ccw.svg" class="btn-icon" alt="" />
                        Resetar F√°brica
                    </button>
                </div>

                <div id="blockly-area" class="blockly-workspace-area"></div>

                <div class="bottom-panel system-log-panel">
                    <div class="panel-header">
                        <h2>Log do Sistema</h2>
                    </div>
                    <div id="system-log-container" class="log-display"></div>
                </div>
            </div>

            <div id="sidebar-resizer" class="resizer-gutter"></div>

            <aside class="sidebar" id="sidebar">
                <button id="btn-toggle-sidebar" class="btn-sidebar-toggle" title="Recolher/Expandir Sidebar">
                    <img src="/icons/lucid/circle-chevron-right.svg" class="btn-icon" alt="" />
                </button>
                <div class="panel panel-expand">
                    <h2>C√≥digo Gerado</h2>
                    <pre id="code-output" class="terminal-display"></pre>
                </div>

                <div class="panel panel-expand">
                    <h2>Sa√≠da do Terminal</h2>
                    <pre id="cli-output" class="terminal-display">$</pre>
                </div>

                <div id="action-buttons" class="panel action-buttons-panel">
                    <button id="run-btn" class="btn btn-run">Executar</button>
                    <button id="clear-btn" class="btn btn-clear">Limpar Sa√≠da</button>
                </div>
            </aside>
        </main>

        <dialog id="validation-modal" class="validation-dialog">
            <div class="modal-content error-theme">
                <div class="modal-header">
                    <h2 class="modal-title">
                        <img
                            src="/icons/lucid/triangle-alert.svg"
                            class="icon-inline"
                            style="vertical-align: middle; margin-right: 8px"
                            alt="" />
                        Corre√ß√µes Necess√°rias
                    </h2>
                </div>
                <div class="modal-body">
                    <ul id="validation-error-list" class="validation-list"></ul>
                </div>
                <div class="modal-footer">
                    <button id="close-modal-btn" class="btn btn-close-modal">Entendi</button>
                </div>
            </div>
        </dialog>

        <dialog id="help-modal" class="validation-dialog">
            <div class="modal-content info-theme">
                <div class="modal-header" style="background-color: var(--color-brand-primary)">
                    <h2 class="modal-title">
                        <img src="/icons/lucid/circle-question-mark.svg" class="icon-inline" style="filter: brightness(0) invert(1)" alt="" />
                        Guia de Sobreviv√™ncia
                    </h2>
                </div>

                <div class="modal-body help-guide-body" style="line-height: 1.6; color: #333; padding: 20px">
                    <section>
                        <h3 style="color: var(--color-brand-primary); margin-bottom: 5px">O que √© "Linha de Comando"?</h3>
                        <p>
                            A maioria usa o computador clicando em √≠cones (Interface Gr√°fica). A <strong>Linha de Comando (CLI)</strong> √© a
                            forma original de conversar com o sistema.
                        </p>
                        <p style="margin-top: 8px">
                            Em vez de um "controle remoto" (mouse), voc√™ escreve <strong>bilhetes com ordens exatas</strong> para o
                            computador. √â muito mais poderoso!
                        </p>
                    </section>

                    <hr style="border: 0; border-top: 1px solid #eee; margin: 15px 0" />

                    <section>
                        <h3 style="color: var(--color-brand-primary); margin-bottom: 5px">A Gram√°tica do Computador</h3>
                        <p>Quase todo comando segue esta l√≥gica simples:</p>

                        <div
                            style="
                                background: #f1f3f5;
                                padding: 10px;
                                border-radius: 6px;
                                text-align: center;
                                font-family: var(--font-mono);
                                font-weight: bold;
                                color: #495057;
                                margin: 10px 0;
                            ">
                            A√á√ÉO + ALVO + OP√á√ÉO
                        </div>

                        <ul style="padding-left: 20px; margin-top: 5px">
                            <li><strong>A√ß√£o:</strong> O que fazer? (ex: <code>ls</code> listar, <code>rm</code> remover)</li>
                            <li><strong>Alvo:</strong> Em quem? (ex: <code>documento.txt</code>)</li>
                            <li><strong>Op√ß√£o:</strong> Como? (ex: <code>-r</code> recursivo)</li>
                        </ul>
                    </section>

                    <hr style="border: 0; border-top: 1px solid #eee; margin: 15px 0" />

                    <section>
                        <h3 style="color: var(--color-brand-primary); margin-bottom: 5px">üß© Como o ShellBlocks ajuda?</h3>
                        <p>Esta ferramenta √© o seu tradutor:</p>
                        <ul style="padding-left: 20px">
                            <li style="margin-bottom: 5px">
                                <strong>√Årea de Blocos:</strong> Pense na <em>L√≥gica</em>. Apenas encaixe as pe√ßas que fazem sentido.
                            </li>
                            <li style="margin-bottom: 5px">
                                <strong>C√≥digo Gerado:</strong> Veja a <em>Sintaxe</em> real do Linux aparecendo na lateral.
                            </li>
                            <li>
                                <strong>Terminal:</strong> Clique em <span style="color: #28a745; font-weight: bold">Executar</span>. O
                                computador simulado te dar√° a resposta.
                            </li>
                        </ul>
                    </section>

                    <div
                        style="
                            margin-top: 20px;
                            background-color: #fff3cd;
                            border-left: 4px solid #ffc107;
                            padding: 15px;
                            border-radius: 4px;
                        ">
                        <h3 style="margin-top: 0; color: #856404; font-size: 1rem">üí° Dicas para n√£o travar:</h3>
                        <ul style="margin: 0; padding-left: 20px; color: #856404">
                            <li style="margin-bottom: 5px"><strong>A ordem importa:</strong> O computador l√™ de cima para baixo.</li>
                            <li style="margin-bottom: 5px">
                                <strong>Leia a Miss√£o:</strong> O painel no topo diz o que se espera de voc√™.
                            </li>
                            <li>
                                <strong>O Erro √© seu amigo:</strong> Texto vermelho n√£o √© ruim! Ele explica o que o computador n√£o entendeu.
                                Leia e tente de novo.
                            </li>
                        </ul>
                    </div>
                </div>

                <div class="modal-footer">
                    <button id="close-help-btn" class="btn btn-close-modal" style="background-color: var(--color-brand-primary)">
                        Entendi, vamos l√°!
                    </button>
                </div>
            </div>
        </dialog>
    </body>
</html>
